{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useParams,Link}from\"react-router-dom\";import Header from\"../Header\";import Footer from\"../Footer\";import ImageSlider from\"../../ImageSlider\";import\"./PetShopDetail.css\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";//ブラウザのクッキーに保存されているuserIdという値を取り出す\nconst getUserIdFromCookie=()=>{const cookies=document.cookie.split(\"; \");for(let cookie of cookies){const[name,value]=cookie.split(\"=\");if(name===\"user_id\"){const parsedValue=parseInt(decodeURIComponent(value),10);return isNaN(parsedValue)?null:parsedValue;}}return null;};const PetShopDetail=()=>{const{id}=useParams();const[store,setStore]=useState(null);const[error,setError]=useState(null);const[isFavorite,setIsFavorite]=useState(false);const[userId,setUserId]=useState(0);const MAP_API_KEY=process.env.REACT_APP_MAP_API_KEY;useEffect(()=>{const userIdFromCookie=getUserIdFromCookie();setUserId(userIdFromCookie);// `number | null` の型で渡す\n},[]);useEffect(()=>{const fetchStoreAndReviews=async()=>{try{// 店舗情報を取得\nconst storeResponse=await fetch(`${process.env.REACT_APP_BASE_URL}/stores/detail/${id}`);if(!storeResponse.ok)throw new Error(\"店舗情報の取得に失敗しました\");const storeData=await storeResponse.json();// 口コミ情報を取得\nconst reviewResponse=await fetch(`${process.env.REACT_APP_BASE_URL}/reviews`);if(!reviewResponse.ok)throw new Error(\"口コミ情報の取得に失敗しました\");const reviewData=await reviewResponse.json();// 店舗に関連付けられた口コミをフィルタリング\nconst reviews=reviewData.filter(review=>review.store_id===storeData.store_id);// 店舗情報に口コミを追加\nsetStore({...storeData,reviews});}catch(err){console.error(\"データ取得エラー:\",err);}};const fetchFavorite=async()=>{try{if(!userId)return;const favoriteResponse=await fetch(`${process.env.REACT_APP_BASE_URL}/favorites/${userId}`);if(favoriteResponse.ok){const favoriteData=await favoriteResponse.json();setIsFavorite(favoriteData.some(fav=>fav.store_id===Number(id)));}}catch(err){console.error(\"お気に入り情報取得エラー:\",err);}};if(id){fetchStoreAndReviews();if(userId)fetchFavorite();}},[id,userId]);//-----------店舗情報とお気に入り状態を取得する処理\nconst handleFavoriteClick=async()=>{if(!store||userId===null)return;const url=`${process.env.REACT_APP_BASE_URL}/favorites`;const method=isFavorite?\"DELETE\":\"POST\";const body=JSON.stringify({user_id:userId,store_id:store.store_id});try{const response=await fetch(url,{method,headers:{\"Content-Type\":\"application/json\"},body});if(!response.ok)throw new Error(\"お気に入りの更新に失敗しました\");setIsFavorite(!isFavorite);}catch(err){setError(\"お気に入りの更新に失敗しました\");}};if(error)return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:error});if(!store)return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:\"\\u30C7\\u30FC\\u30BF\\u3092\\u8AAD\\u307F\\u8FBC\\u3093\\u3067\\u3044\\u307E\\u3059\"});//平均評価の計算\nconst averageRating=store.reviews&&store.reviews.length>0?store.reviews.reduce((sum,rev)=>sum+rev.rating,0)/store.reviews.length:0;// 店舗詳細情報の表示\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"review-button-title\",children:store.store_name}),store.store_img.length>0?/*#__PURE__*/_jsx(ImageSlider,{images:store.store_img}):/*#__PURE__*/_jsx(\"p\",{children:\"\\u753B\\u50CF\\u304C\\u3042\\u308A\\u307E\\u305B\\u3093\"}),store.reviews&&store.reviews.length>0&&/*#__PURE__*/_jsx(Link,{to:`/dogrun/reviews/${store.store_id}`,className:\"review-button-detail\",children:\"\\u53E3\\u30B3\\u30DF\\u3092\\u898B\\u308B\"}),/*#__PURE__*/_jsx(\"div\",{style:{margin:\"20px 0\"},children:store.reviews&&store.reviews.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:\"24px\",color:\"gray\"},children:[1,2,3,4,5].map(value=>{var _store$reviews$reduce,_store$reviews,_store$reviews2;return/*#__PURE__*/_jsx(\"span\",{className:`star ${value<=Math.round(((_store$reviews$reduce=(_store$reviews=store.reviews)===null||_store$reviews===void 0?void 0:_store$reviews.reduce((sum,rev)=>sum+rev.rating,0))!==null&&_store$reviews$reduce!==void 0?_store$reviews$reduce:0)/(((_store$reviews2=store.reviews)===null||_store$reviews2===void 0?void 0:_store$reviews2.length)||1)// ゼロ除算を防ぐ\n)?\"selected\":\"\"}`,children:\"\\u2605\"},value);})}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"14px\",fontWeight:\"bold\"},children:averageRating.toFixed(1)})]}):/*#__PURE__*/_jsx(\"p\",{children:\"\\u307E\\u3060\\u53E3\\u30B3\\u30DF\\u306F\\u3042\\u308A\\u307E\\u305B\\u3093\"})}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u4F4F\\u6240: \"}),store.store_address]}),MAP_API_KEY&&/*#__PURE__*/_jsx(\"div\",{style:{margin:\"20px 0\"},children:/*#__PURE__*/_jsx(\"iframe\",{title:\"Google Map\",width:\"100%\",height:\"300\",style:{border:\"0\",borderRadius:\"8px\"},src:`https://www.google.com/maps/embed/v1/place?key=${MAP_API_KEY}&q=${encodeURIComponent(store.store_address)}`,allowFullScreen:true})}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u96FB\\u8A71\\u756A\\u53F7: \",store.store_phone_number]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u55B6\\u696D\\u6642\\u9593: \",store.store_opening_hours]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:handleFavoriteClick,className:`favorite-button${isFavorite?\" active\":\"\"}`,children:isFavorite?\"お気に入り解除\":\"お気に入り登録\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"a\",{href:store.store_url,target:\"_blank\",rel:\"noopener noreferrer\",className:\"official-site\",children:\"\\u5E97\\u8217\\u306E\\u516C\\u5F0F\\u30B5\\u30A4\\u30C8\"})]}),/*#__PURE__*/_jsx(Footer,{})]});};export default PetShopDetail;","map":{"version":3,"names":["React","useEffect","useState","useParams","Link","Header","Footer","ImageSlider","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","getUserIdFromCookie","cookies","document","cookie","split","name","value","parsedValue","parseInt","decodeURIComponent","isNaN","PetShopDetail","id","store","setStore","error","setError","isFavorite","setIsFavorite","userId","setUserId","MAP_API_KEY","process","env","REACT_APP_MAP_API_KEY","userIdFromCookie","fetchStoreAndReviews","storeResponse","fetch","REACT_APP_BASE_URL","ok","Error","storeData","json","reviewResponse","reviewData","reviews","filter","review","store_id","err","console","fetchFavorite","favoriteResponse","favoriteData","some","fav","Number","handleFavoriteClick","url","method","body","JSON","stringify","user_id","response","headers","className","children","averageRating","length","reduce","sum","rev","rating","store_name","store_img","images","to","style","margin","fontSize","color","map","_store$reviews$reduce","_store$reviews","_store$reviews2","Math","round","fontWeight","toFixed","store_address","title","width","height","border","borderRadius","src","encodeURIComponent","allowFullScreen","store_phone_number","store_opening_hours","onClick","href","store_url","target","rel"],"sources":["/Users/hadamayuka/Desktop/wan_paradise/my-app/src/pages/Petshop/PetShopDetail.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useParams, Link } from \"react-router-dom\";\nimport Header from \"../Header\";\nimport Footer from \"../Footer\";\nimport ImageSlider from \"../../ImageSlider\";\nimport \"./PetShopDetail.css\";\n\ninterface Store {\n  store_id: number;\n  store_name: string;\n  store_description: string;\n  store_address: string;\n  store_opening_hours: string;\n  store_phone_number: string;\n  store_url: string;\n  store_img: string[];\n  tags: string[]; // タグの配列として定義\n  reviews?: Review[];\n}\n\ninterface Review {\n  id: number;\n  store_id: number;\n  rating: number;\n  comment: string;\n}\n\n//ブラウザのクッキーに保存されているuserIdという値を取り出す\nconst getUserIdFromCookie = (): number | null => {\n  const cookies = document.cookie.split(\"; \");\n  for (let cookie of cookies) {\n    const [name, value] = cookie.split(\"=\");\n    if (name === \"user_id\") {\n      const parsedValue = parseInt(decodeURIComponent(value), 10);\n      return isNaN(parsedValue) ? null : parsedValue;\n    }\n  }\n  return null;\n};\n\n\nconst PetShopDetail: React.FC = () => {\n  const { id } = useParams<{ id: string }>();\n  const [store, setStore] = useState<Store | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  const [isFavorite, setIsFavorite] = useState<boolean>(false);\n  const [userId, setUserId] = useState<number | null>(0);\n  const MAP_API_KEY = process.env.REACT_APP_MAP_API_KEY;\n  useEffect(() => {\n    const userIdFromCookie = getUserIdFromCookie();\n    setUserId(userIdFromCookie); // `number | null` の型で渡す\n  }, []);\n\n  useEffect(() => {\n    const fetchStoreAndReviews = async () => {\n      try {\n        // 店舗情報を取得\n        const storeResponse = await fetch(`${process.env.REACT_APP_BASE_URL}/stores/detail/${id}`);\n        if (!storeResponse.ok) throw new Error(\"店舗情報の取得に失敗しました\");\n        const storeData: Store = await storeResponse.json();\n\n        // 口コミ情報を取得\n        const reviewResponse = await fetch(`${process.env.REACT_APP_BASE_URL}/reviews`);\n        if (!reviewResponse.ok) throw new Error(\"口コミ情報の取得に失敗しました\");\n        const reviewData: Review[] = await reviewResponse.json();\n\n        // 店舗に関連付けられた口コミをフィルタリング\n        const reviews = reviewData.filter((review) => review.store_id === storeData.store_id);\n\n        // 店舗情報に口コミを追加\n        setStore({ ...storeData, reviews });\n      } catch (err: any) {\n        console.error(\"データ取得エラー:\", err);\n      }\n    };\n\n    const fetchFavorite = async () => {\n      try {\n        if (!userId) return;\n\n        const favoriteResponse = await fetch(`${process.env.REACT_APP_BASE_URL}/favorites/${userId}`);\n        if (favoriteResponse.ok) {\n          const favoriteData: { store_id: number }[] = await favoriteResponse.json();\n          setIsFavorite(favoriteData.some((fav) => fav.store_id === Number(id)));\n        }\n      } catch (err: any) {\n        console.error(\"お気に入り情報取得エラー:\", err);\n      }\n    };\n\n    if (id) {\n      fetchStoreAndReviews();\n      if (userId) fetchFavorite();\n    }\n  }, [id, userId]);\n\n//-----------店舗情報とお気に入り状態を取得する処理\nconst handleFavoriteClick = async () => {\n  if (!store || userId === null) return;\n\n  const url = `${process.env.REACT_APP_BASE_URL}/favorites`;\n  const method = isFavorite ? \"DELETE\" : \"POST\";\n  const body = JSON.stringify({\n    user_id: userId,\n    store_id: store.store_id,\n  });\n\n  try {\n    const response = await fetch(url, {\n      method,\n      headers: { \"Content-Type\": \"application/json\" },\n      body,\n    });\n    if (!response.ok) throw new Error(\"お気に入りの更新に失敗しました\");\n    setIsFavorite(!isFavorite);\n  } catch (err) {\n    setError(\"お気に入りの更新に失敗しました\");\n  }\n};\n\n\n  if (error) return <div className=\"container\">{error}</div>;\n  if (!store) return <div className=\"container\">データを読み込んでいます</div>;\n\n\n//平均評価の計算\nconst averageRating = \n  store.reviews && store.reviews.length > 0 \n  ? store.reviews.reduce((sum, rev) => sum + rev.rating, 0) /\n    store.reviews.length\n    : 0;\n\n  // 店舗詳細情報の表示\n  return (\n    <>\n    <Header/>\n    <div className=\"detail-container\">\n      <h1 className=\"review-button-title\">{store.store_name}</h1>\n      {store.store_img.length > 0 ? (\n        <ImageSlider images={store.store_img} />\n      ) : (\n        <p>画像がありません</p>\n      )}\n\n      {/*口コミ一覧ページへのリンクを追加*/}\n        {store.reviews && store.reviews.length > 0 && (\n          <Link\n            to={`/dogrun/reviews/${store.store_id}`}\n            className=\"review-button-detail\"\n          >\n            口コミを見る\n          </Link>\n        )}\n      {/* 平均評価を星で表示 */}\n        <div style={{margin: \"20px 0\"}}>\n          {store.reviews && store.reviews.length > 0 ? (\n            <>\n            <div style={{ fontSize: \"24px\", color: \"gray\"}}>\n              {[1, 2, 3, 4, 5].map((value) => (\n                <span\n                  key={value}\n                  className={`star ${value <=\n                    Math.round(\n                      (store.reviews?.reduce((sum, rev) => sum + rev.rating, 0) ?? 0) /\n                      (store.reviews?.length || 1) // ゼロ除算を防ぐ\n                    )\n                    ? \"selected\"\n                    : \"\"\n                    }`}\n                >\n                  ★\n                </span>\n              ))}\n            </div>\n            <p style={{ fontSize: \"14px\", fontWeight: \"bold\" }}>\n              {averageRating.toFixed(1)}\n            </p>\n          </>\n        ) : (\n          <p>まだ口コミはありません</p>\n        )}\n        </div>\n\n        {/* 店舗情報 */}\n        <p>\n        <strong>住所: </strong>\n        {store.store_address}\n      </p>\n      {/* Google Map 埋め込み */}\n      {MAP_API_KEY && (\n      <div style={{ margin: \"20px 0\" }}>\n        <iframe\n          title=\"Google Map\"\n          width=\"100%\"\n          height=\"300\"\n          style={{ border: \"0\", borderRadius: \"8px\" }}\n          src={`https://www.google.com/maps/embed/v1/place?key=${MAP_API_KEY}&q=${encodeURIComponent(\n            store.store_address\n          )}`}\n          allowFullScreen\n        ></iframe>\n      </div>\n      )}\n      <p>電話番号: {store.store_phone_number}</p>\n      <p>営業時間: {store.store_opening_hours}</p>\n    {/* お気に入りボタン */}\n    <br />\n      <button \n        onClick={handleFavoriteClick}\n        className={`favorite-button${isFavorite ? \" active\" : \"\"}`}>\n          {isFavorite ? \"お気に入り解除\" : \"お気に入り登録\"}\n        </button>\n        <br />\n      <a\n        href={store.store_url}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        className=\"official-site\"\n      >\n        店舗の公式サイト\n      </a>\n    </div>\n    <Footer/>\n    </>\n  );\n};\n\nexport default PetShopDetail;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}