{"ast":null,"code":"var _jsxFileName = \"/Users/hadamayuka/Desktop/wan_paradise/my-app/src/pages/Dogcafe/DogCafeStoreList.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst DogCafeStoreList = () => {\n  _s();\n  const {\n    prefectureId\n  } = useParams();\n  const [stores] = useState([]);\n  const [selectedDogCafeTagIds, setSelectedDogCafeTagIds] = useState([]);\n  const [dogCafeTags, setDogCafeTags] = useState([]);\n  const [selectedPrefecture, setSelectedPrefecture] = useState(\"\");\n\n  // タグデータの取得\n  useEffect(() => {\n    const fetchDogCafeTags = async () => {\n      try {\n        const response = await fetch(`http://localhost:5003/dog_cafe_tags/list${prefectureId}`);\n        const data = await response.json();\n        setDogCafeTags(data);\n      } catch (error) {\n        console.error(\"タグ情報の取得に失敗しました:\", error);\n      }\n    };\n    fetchDogCafeTags();\n  }, [prefectureId]);\n  useEffect(() => {\n    const fetchDogCafeTags = async () => {\n      try {\n        const queryParams = new URLSearchParams();\n        if (selectedDogCafeTagIds.length > 0) {\n          queryParams.append(\"DogCafetags\", selectedDogCafeTagIds.join(\",\"));\n        }\n        //APIからデータを取得する\n        const response = await fetch(`http://localhost:5003/dogcafetags?${queryParams.toString()}`);\n        const data = await response.json();\n\n        //データが、配列か確認して状態に設定\n        if (Array.isArray(data)) {\n          setDogCafeTags(data);\n        } else {\n          setDogCafeTags([]);\n        }\n      } catch (error) {\n        console.error(\"データー取得中にエラーが発生しました:\", error);\n        setDogCafeTags([]);\n      }\n      if (selectedDogCafeTagIds.length > 0) {\n        fetchDogCafeTags();\n      } else {\n        setDogCafeTags([]);\n      }\n    };\n  }, [selecteDogCafeTagsId]);\n\n  // 店舗データのフィルタリング\n  const filteredDogCafeStores = stores.filter(store => selectedDogCafeTagIds.length === 0 ? true : store.tags.some(tag => selectedDogCafeTagIds.includes(tag.id)));\n\n  // タグ選択ハンドラー\n  const handleClickDogCafeTag = dogCafeTagId => {\n    setSelectedDogCafeTagIds(prevSelectedDogCafeTagIds => prevSelectedDogCafeTagIds.includes(dogCafeTagId) ? prevSelectedDogCafeTagIds.filter(id => id !== dogCafeTagId) : [...prevSelectedDogCafeTagIds, dogCafeTagId]);\n  };\n\n  // 都道府県名の設定\n  useEffect(() => {\n    const prefectureNames = {\n      \"1\": \"北海道\",\n      \"13\": \"東京\",\n      \"14\": \"神奈川\",\n      \"23\": \"愛知\",\n      \"26\": \"京都\",\n      \"27\": \"大阪\",\n      \"28\": \"兵庫\"\n    };\n    setSelectedPrefecture(prefectureNames[prefectureId !== null && prefectureId !== void 0 ? prefectureId : \"\"] || \"ドッグカフェ情報がありません\");\n  }, [prefectureId]);\n  const isPrefectureSupported = selectedPrefecture !== \"ドッグカフェ情報がありません\";\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      textAlign: \"center\",\n      padding: \"20px\",\n      backgroundColor: \"#FAF3E0\"\n    },\n    children: isPrefectureSupported ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [selectedPrefecture, \"\\u306E\\u30C9\\u30C3\\u30B0\\u30AB\\u30D5\\u30A7\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u6761\\u4EF6\\u3092\\u7D5E\\u308A\\u8FBC\\u3080\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: dogCafeTags.map(dogCafeTags => /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleClickDogCafeTag(dogCafeTags.id),\n          style: {\n            marginRight: \"10px\",\n            backgroundColor: selectedDogCafeTagIds.includes(dogCafeTags.id) ? \"#B6A28E\" : \"white\"\n          },\n          children: dogCafeTags.name\n        }, dogCafeTags.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\u5E97\\u8217\\u4E00\\u89A7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: stores.map(store => /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: store.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: store.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: store.address\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 17\n          }, this)]\n        }, store.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u30C9\\u30C3\\u30B0\\u30AB\\u30D5\\u30A7\\u60C5\\u5831\\u304C\\u3042\\u308A\\u307E\\u305B\\u3093\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u8A72\\u5F53\\u3059\\u308B\\u30C7\\u30FC\\u30BF\\u304C\\u898B\\u3064\\u304B\\u308A\\u307E\\u305B\\u3093\\u3002\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 5\n  }, this);\n};\n_s(DogCafeStoreList, \"aKYRb7y74fMgt+3d5U6vr1VrlcU=\", false, function () {\n  return [useParams];\n});\n_c = DogCafeStoreList;\nexport default DogCafeStoreList;\nvar _c;\n$RefreshReg$(_c, \"DogCafeStoreList\");","map":{"version":3,"names":["React","useEffect","useState","useParams","jsxDEV","_jsxDEV","Fragment","_Fragment","DogCafeStoreList","_s","prefectureId","stores","selectedDogCafeTagIds","setSelectedDogCafeTagIds","dogCafeTags","setDogCafeTags","selectedPrefecture","setSelectedPrefecture","fetchDogCafeTags","response","fetch","data","json","error","console","queryParams","URLSearchParams","length","append","join","toString","Array","isArray","selecteDogCafeTagsId","filteredDogCafeStores","filter","store","tags","some","tag","includes","id","handleClickDogCafeTag","dogCafeTagId","prevSelectedDogCafeTagIds","prefectureNames","isPrefectureSupported","style","textAlign","padding","backgroundColor","children","fileName","_jsxFileName","lineNumber","columnNumber","map","onClick","marginRight","name","description","address","_c","$RefreshReg$"],"sources":["/Users/hadamayuka/Desktop/wan_paradise/my-app/src/pages/Dogcafe/DogCafeStoreList.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\n\ninterface Shop {\n  id: number;\n  name: string;\n  description: string;\n  address: string;\n  phone_number: string;\n  store_url: string;\n  store_img: string;\n  tags: { id: number; name: string }[];\n}\n\ninterface DogCafeTag {\n  id: number;\n  name: string;\n}\n\ninterface Tag {\n  id: number;\n  name: string;\n}\n\n\n\n\nconst DogCafeStoreList: React.FC = () => {\n  const { prefectureId } = useParams<{ prefectureId: string }>();\n  const [stores] = useState<Shop[]>([]);\n  const [selectedDogCafeTagIds, setSelectedDogCafeTagIds] = useState<number[]>([]);\n  const [dogCafeTags, setDogCafeTags] = useState<DogCafeTag[]>([]);\n  const [selectedPrefecture, setSelectedPrefecture] = useState<string>(\"\");\n\n  // タグデータの取得\n  useEffect(() => {\n    const fetchDogCafeTags = async () => {\n      try {\n        const response = await fetch(`http://localhost:5003/dog_cafe_tags/list${prefectureId}`);\n        const data: DogCafeTag[] = await response.json();\n        setDogCafeTags(data);\n      } catch (error) {\n        console.error(\"タグ情報の取得に失敗しました:\", error);\n      }\n    };\n    fetchDogCafeTags();\n  }, [prefectureId]);\n\n  \n\n  useEffect(() => {\n    const fetchDogCafeTags = async () => {\n      try {\n        const queryParams = new URLSearchParams(); \n         if (selectedDogCafeTagIds.length > 0) {\n          queryParams.append(\"DogCafetags\", selectedDogCafeTagIds.join(\",\"));\n         }\n         //APIからデータを取得する\n        const response = await fetch(`http://localhost:5003/dogcafetags?${queryParams.toString()}`);\n        const data = await response.json();\n      \n      //データが、配列か確認して状態に設定\n    if (Array.isArray(data)) {\n      setDogCafeTags(data);\n    } else {\n      setDogCafeTags([]);\n     }\n    } catch (error) {\n      console.error(\"データー取得中にエラーが発生しました:\", error);\n      setDogCafeTags([]);\n    }\n     if (selectedDogCafeTagIds.length > 0){    \n    fetchDogCafeTags();\n     }else {\n      setDogCafeTags([]);\n     }}\n    }, [selecteDogCafeTagsId]);\n\n\n\n  // 店舗データのフィルタリング\n  const filteredDogCafeStores = stores.filter((store) =>\n    selectedDogCafeTagIds.length === 0\n      ? true\n      : store.tags.some((tag) => selectedDogCafeTagIds.includes(tag.id))\n  );\n\n  // タグ選択ハンドラー\n  const handleClickDogCafeTag = (dogCafeTagId: number) => {\n    setSelectedDogCafeTagIds((prevSelectedDogCafeTagIds) =>\n      prevSelectedDogCafeTagIds.includes(dogCafeTagId)\n        ? prevSelectedDogCafeTagIds.filter((id) => id !== dogCafeTagId)\n        : [...prevSelectedDogCafeTagIds, dogCafeTagId]\n    );\n  };\n\n  // 都道府県名の設定\n  useEffect(() => {\n    const prefectureNames: { [key: string]: string } = {\n      \"1\": \"北海道\",\n      \"13\": \"東京\",\n      \"14\": \"神奈川\",\n      \"23\": \"愛知\",\n      \"26\": \"京都\",\n      \"27\": \"大阪\",\n      \"28\": \"兵庫\",\n    };\n    setSelectedPrefecture(\n      prefectureNames[prefectureId ?? \"\"] || \"ドッグカフェ情報がありません\"\n    );\n  }, [prefectureId]);\n\n  const isPrefectureSupported =\n    selectedPrefecture !== \"ドッグカフェ情報がありません\";\n\n  return (\n    <div\n      style={{\n        textAlign: \"center\",\n        padding: \"20px\",\n        backgroundColor: \"#FAF3E0\",\n      }}\n    >\n      {isPrefectureSupported ? (\n        <>\n          <h2>{selectedPrefecture}のドッグカフェ</h2>\n          <p>条件を絞り込む</p>\n          <div>\n            {dogCafeTags.map((dogCafeTags) => (\n              <button\n                key={dogCafeTags.id}\n                onClick={() => handleClickDogCafeTag(dogCafeTags.id)}\n                style={{\n                  marginRight: \"10px\",\n                  backgroundColor: selectedDogCafeTagIds.includes(dogCafeTags.id)\n                    ? \"#B6A28E\"\n                    : \"white\",\n                }}\n              >\n                {dogCafeTags.name}\n              </button>\n            ))}\n          </div>\n          <h3>店舗一覧</h3>\n          <div>\n            {stores.map((store) => (\n              <div key={store.id}>\n                <h4>{store.name}</h4>\n                <p>{store.description}</p>\n                <p>{store.address}</p>\n              </div>\n            ))}\n          </div>\n        </>\n      ) : (\n        <>\n          <h2>ドッグカフェ情報がありません</h2>\n          <p>該当するデータが見つかりません。</p>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default DogCafeStoreList;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,SAAS,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AA0B7C,MAAMC,gBAA0B,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACvC,MAAM;IAAEC;EAAa,CAAC,GAAGP,SAAS,CAA2B,CAAC;EAC9D,MAAM,CAACQ,MAAM,CAAC,GAAGT,QAAQ,CAAS,EAAE,CAAC;EACrC,MAAM,CAACU,qBAAqB,EAAEC,wBAAwB,CAAC,GAAGX,QAAQ,CAAW,EAAE,CAAC;EAChF,MAAM,CAACY,WAAW,EAAEC,cAAc,CAAC,GAAGb,QAAQ,CAAe,EAAE,CAAC;EAChE,MAAM,CAACc,kBAAkB,EAAEC,qBAAqB,CAAC,GAAGf,QAAQ,CAAS,EAAE,CAAC;;EAExE;EACAD,SAAS,CAAC,MAAM;IACd,MAAMiB,gBAAgB,GAAG,MAAAA,CAAA,KAAY;MACnC,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,2CAA2CV,YAAY,EAAE,CAAC;QACvF,MAAMW,IAAkB,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;QAChDP,cAAc,CAACM,IAAI,CAAC;MACtB,CAAC,CAAC,OAAOE,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,iBAAiB,EAAEA,KAAK,CAAC;MACzC;IACF,CAAC;IACDL,gBAAgB,CAAC,CAAC;EACpB,CAAC,EAAE,CAACR,YAAY,CAAC,CAAC;EAIlBT,SAAS,CAAC,MAAM;IACd,MAAMiB,gBAAgB,GAAG,MAAAA,CAAA,KAAY;MACnC,IAAI;QACF,MAAMO,WAAW,GAAG,IAAIC,eAAe,CAAC,CAAC;QACxC,IAAId,qBAAqB,CAACe,MAAM,GAAG,CAAC,EAAE;UACrCF,WAAW,CAACG,MAAM,CAAC,aAAa,EAAEhB,qBAAqB,CAACiB,IAAI,CAAC,GAAG,CAAC,CAAC;QACnE;QACA;QACD,MAAMV,QAAQ,GAAG,MAAMC,KAAK,CAAC,qCAAqCK,WAAW,CAACK,QAAQ,CAAC,CAAC,EAAE,CAAC;QAC3F,MAAMT,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;;QAEpC;QACF,IAAIS,KAAK,CAACC,OAAO,CAACX,IAAI,CAAC,EAAE;UACvBN,cAAc,CAACM,IAAI,CAAC;QACtB,CAAC,MAAM;UACLN,cAAc,CAAC,EAAE,CAAC;QACnB;MACD,CAAC,CAAC,OAAOQ,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;QAC3CR,cAAc,CAAC,EAAE,CAAC;MACpB;MACC,IAAIH,qBAAqB,CAACe,MAAM,GAAG,CAAC,EAAC;QACtCT,gBAAgB,CAAC,CAAC;MACjB,CAAC,MAAK;QACLH,cAAc,CAAC,EAAE,CAAC;MACnB;IAAC,CAAC;EACH,CAAC,EAAE,CAACkB,oBAAoB,CAAC,CAAC;;EAI5B;EACA,MAAMC,qBAAqB,GAAGvB,MAAM,CAACwB,MAAM,CAAEC,KAAK,IAChDxB,qBAAqB,CAACe,MAAM,KAAK,CAAC,GAC9B,IAAI,GACJS,KAAK,CAACC,IAAI,CAACC,IAAI,CAAEC,GAAG,IAAK3B,qBAAqB,CAAC4B,QAAQ,CAACD,GAAG,CAACE,EAAE,CAAC,CACrE,CAAC;;EAED;EACA,MAAMC,qBAAqB,GAAIC,YAAoB,IAAK;IACtD9B,wBAAwB,CAAE+B,yBAAyB,IACjDA,yBAAyB,CAACJ,QAAQ,CAACG,YAAY,CAAC,GAC5CC,yBAAyB,CAACT,MAAM,CAAEM,EAAE,IAAKA,EAAE,KAAKE,YAAY,CAAC,GAC7D,CAAC,GAAGC,yBAAyB,EAAED,YAAY,CACjD,CAAC;EACH,CAAC;;EAED;EACA1C,SAAS,CAAC,MAAM;IACd,MAAM4C,eAA0C,GAAG;MACjD,GAAG,EAAE,KAAK;MACV,IAAI,EAAE,IAAI;MACV,IAAI,EAAE,KAAK;MACX,IAAI,EAAE,IAAI;MACV,IAAI,EAAE,IAAI;MACV,IAAI,EAAE,IAAI;MACV,IAAI,EAAE;IACR,CAAC;IACD5B,qBAAqB,CACnB4B,eAAe,CAACnC,YAAY,aAAZA,YAAY,cAAZA,YAAY,GAAI,EAAE,CAAC,IAAI,gBACzC,CAAC;EACH,CAAC,EAAE,CAACA,YAAY,CAAC,CAAC;EAElB,MAAMoC,qBAAqB,GACzB9B,kBAAkB,KAAK,gBAAgB;EAEzC,oBACEX,OAAA;IACE0C,KAAK,EAAE;MACLC,SAAS,EAAE,QAAQ;MACnBC,OAAO,EAAE,MAAM;MACfC,eAAe,EAAE;IACnB,CAAE;IAAAC,QAAA,EAEDL,qBAAqB,gBACpBzC,OAAA,CAAAE,SAAA;MAAA4C,QAAA,gBACE9C,OAAA;QAAA8C,QAAA,GAAKnC,kBAAkB,EAAC,4CAAO;MAAA;QAAAoC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACpClD,OAAA;QAAA8C,QAAA,EAAG;MAAO;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,eACdlD,OAAA;QAAA8C,QAAA,EACGrC,WAAW,CAAC0C,GAAG,CAAE1C,WAAW,iBAC3BT,OAAA;UAEEoD,OAAO,EAAEA,CAAA,KAAMf,qBAAqB,CAAC5B,WAAW,CAAC2B,EAAE,CAAE;UACrDM,KAAK,EAAE;YACLW,WAAW,EAAE,MAAM;YACnBR,eAAe,EAAEtC,qBAAqB,CAAC4B,QAAQ,CAAC1B,WAAW,CAAC2B,EAAE,CAAC,GAC3D,SAAS,GACT;UACN,CAAE;UAAAU,QAAA,EAEDrC,WAAW,CAAC6C;QAAI,GATZ7C,WAAW,CAAC2B,EAAE;UAAAW,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAUb,CACT;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC,eACNlD,OAAA;QAAA8C,QAAA,EAAI;MAAI;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACblD,OAAA;QAAA8C,QAAA,EACGxC,MAAM,CAAC6C,GAAG,CAAEpB,KAAK,iBAChB/B,OAAA;UAAA8C,QAAA,gBACE9C,OAAA;YAAA8C,QAAA,EAAKf,KAAK,CAACuB;UAAI;YAAAP,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,eACrBlD,OAAA;YAAA8C,QAAA,EAAIf,KAAK,CAACwB;UAAW;YAAAR,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAC1BlD,OAAA;YAAA8C,QAAA,EAAIf,KAAK,CAACyB;UAAO;YAAAT,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC;QAAA,GAHdnB,KAAK,CAACK,EAAE;UAAAW,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAIb,CACN;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC;IAAA,eACN,CAAC,gBAEHlD,OAAA,CAAAE,SAAA;MAAA4C,QAAA,gBACE9C,OAAA;QAAA8C,QAAA,EAAI;MAAc;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACvBlD,OAAA;QAAA8C,QAAA,EAAG;MAAgB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC;IAAA,eACvB;EACH;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC;AAAC9C,EAAA,CAvIID,gBAA0B;EAAA,QACLL,SAAS;AAAA;AAAA2D,EAAA,GAD9BtD,gBAA0B;AAyIhC,eAAeA,gBAAgB;AAAC,IAAAsD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}