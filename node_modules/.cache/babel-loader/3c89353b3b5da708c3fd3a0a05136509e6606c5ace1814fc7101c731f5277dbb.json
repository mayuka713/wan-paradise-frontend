{"ast":null,"code":"import React,{useEffect,useRef,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import\"./DogRunPage.css\";import DogrunImage from\"../assets/images/Dogrun/dogrun.top.png\";import Header from\"../Header\";import Footer from\"../Footer\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const DogRunPage=()=>{const navigate=useNavigate();const[stores,setStores]=useState([]);const sliderRef=useRef(null);const animationFrameId=useRef(null);const handleClick=()=>{navigate(\"/DogrunRegionsList\");};useEffect(()=>{const fetchStoreData=async()=>{try{const response=await fetch(\"\".concat(process.env.REACT_APP_BASE_URL,\"/stores/type/random/1\"));if(!response.ok){throw new Error(\"HTTP\\u30A8\\u30E9\\u30FC: \".concat(response.status));}const data=await response.json();console.log(\"BASE_URL:\",process.env.REACT_APP_BASE_URL);// データを複製してループを作成\nsetStores([...data,...data]);}catch(error){console.error(\"データ取得中にエラーが発生しました:\",error);}};fetchStoreData();},[]);useEffect(()=>{if(!sliderRef.current||stores.length===0)return;const slider=sliderRef.current;let startPosition=0;const animate=()=>{startPosition-=1;// 速度を設定（0.5pxずつ移動）\nif(Math.abs(startPosition)>=slider.scrollWidth/2){// スクロール幅の半分を超えたらリセット\nstartPosition=0;}slider.style.transform=\"translateX(\".concat(startPosition,\"px)\");animationFrameId.current=requestAnimationFrame(animate);// 再帰的に呼び出す\n};// アニメーション開始\nanimationFrameId.current=requestAnimationFrame(animate);return()=>{if(animationFrameId.current!==null){cancelAnimationFrame(animationFrameId.current);}};},[stores]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"dogrun-page-container\",children:[/*#__PURE__*/_jsx(\"p\",{onClick:handleClick,className:\"search-dogrun\",children:\"\\u5168\\u56FD\\u306E\\u30C9\\u30C3\\u30B0\\u30E9\\u30F3\\u3092\\u63A2\\u3059\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:DogrunImage,alt:\"\\u30C9\\u30C3\\u30B0\\u30E9\\u30F3\\u306E\\u30A4\\u30E9\\u30B9\\u30C8\",className:\"dogrun-image\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"store-slider-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"dogrun-slider\",ref:sliderRef,children:stores.map((store,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"store-card\",onClick:()=>navigate(\"/dogrun/detail/\".concat(store.store_id)),children:[store.store_img.length>0&&/*#__PURE__*/_jsx(\"img\",{src:store.store_img[0],alt:store.store_name,className:\"store-image\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"slider-store-name\",children:store.store_name}),/*#__PURE__*/_jsx(\"h3\",{className:\"slider-prefecture-name\",children:store.prefecture_name})]},\"\".concat(store.store_id,\"-\").concat(index)))})})]}),/*#__PURE__*/_jsx(Footer,{})]});};export default DogRunPage;","map":{"version":3,"names":["React","useEffect","useRef","useState","useNavigate","DogrunImage","Header","Footer","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","DogRunPage","navigate","stores","setStores","sliderRef","animationFrameId","handleClick","fetchStoreData","response","fetch","concat","process","env","REACT_APP_BASE_URL","ok","Error","status","data","json","console","log","error","current","length","slider","startPosition","animate","Math","abs","scrollWidth","style","transform","requestAnimationFrame","cancelAnimationFrame","children","className","onClick","src","alt","ref","map","store","index","store_id","store_img","store_name","prefecture_name"],"sources":["/Users/hadamayuka/Desktop/wan_paradise/my-app/src/pages/Dogrun/DogRunPage.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"./DogRunPage.css\";\nimport DogrunImage from \"../assets/images/Dogrun/dogrun.top.png\";\nimport Header from \"../Header\";\nimport Footer from \"../Footer\";\n\ninterface Store {\n  store_id: number;\n  store_name: string;\n  description: string;\n  store_img: string[];\n  address: string;\n  phone_number: string;\n  opening_hours: string;\n  store_url: string;\n  prefecture_name: string;\n}\n\nconst DogRunPage: React.FC = () => {\n  const navigate = useNavigate();\n  const [stores, setStores] = useState<Store[]>([]);\n  const sliderRef = useRef<HTMLDivElement>(null);\n  const animationFrameId = useRef<number | null>(null);\n\n  const handleClick = () => {\n    navigate(\"/DogrunRegionsList\");\n  };\n\n  useEffect(() => {\n    const fetchStoreData = async () => {\n      try {\n        const response = await fetch(`${process.env.REACT_APP_BASE_URL}/stores/type/random/1`);\n        if (!response.ok) {\n          throw new Error(`HTTPエラー: ${response.status}`);\n        }\n\n        const data = await response.json();\n        console.log(\"BASE_URL:\", process.env.REACT_APP_BASE_URL);\n        \n        // データを複製してループを作成\n        setStores([...data, ...data]);\n      } catch (error) {\n        console.error(\"データ取得中にエラーが発生しました:\", error);\n      }\n    };\n\n    fetchStoreData();\n  }, []);\n\n  useEffect(() => {\n    if (!sliderRef.current || stores.length === 0) return;\n\n    const slider = sliderRef.current;\n    let startPosition = 0;\n\n    const animate = () => {\n      startPosition -= 1; // 速度を設定（0.5pxずつ移動）\n\n      if (Math.abs(startPosition) >= slider.scrollWidth / 2) {\n        // スクロール幅の半分を超えたらリセット\n        startPosition = 0;\n      }\n\n      slider.style.transform = `translateX(${startPosition}px)`;\n      animationFrameId.current = requestAnimationFrame(animate); // 再帰的に呼び出す\n    };\n\n    // アニメーション開始\n    animationFrameId.current = requestAnimationFrame(animate);\n\n    return () => {\n      if (animationFrameId.current !== null) {\n        cancelAnimationFrame(animationFrameId.current);\n      }\n    };\n  }, [stores]);\n\n  return (\n    <>\n      <Header />\n      <div className=\"dogrun-page-container\">\n        <p onClick={handleClick} className=\"search-dogrun\">\n          全国のドッグランを探す\n        </p>\n        <div>\n          <img src={DogrunImage} alt=\"ドッグランのイラスト\" className=\"dogrun-image\" />\n        </div>\n        <div className=\"store-slider-container\">\n          <div className=\"dogrun-slider\" ref={sliderRef}>\n            {stores.map((store, index) => (\n              <div\n                key={`${store.store_id}-${index}`}\n                className=\"store-card\"\n                onClick={() => navigate(`/dogrun/detail/${store.store_id}`)}\n              >\n                {store.store_img.length > 0 && (\n                  <img\n                    src={store.store_img[0]}\n                    alt={store.store_name}\n                    className=\"store-image\"\n                  />\n                )}\n                <h3 className=\"slider-store-name\">{store.store_name}</h3>\n                <h3 className=\"slider-prefecture-name\">{store.prefecture_name}</h3>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n      <Footer />\n    </>\n  );\n};\n\nexport default DogRunPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}