{"ast":null,"code":"import React,{useEffect,useRef,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import\"./PetShopPage.css\";import PetshopImage from\"../assets/images/Petshop/petshop.top.png\";import Header from\"../Header\";import Footer from\"../Footer\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const PetshopPage=()=>{const navigate=useNavigate();const[stores,setStores]=useState([]);const slideRef=useRef(null);const animationFrameId=useRef(null);const handleClick=()=>{navigate(\"/petshop-regions-list\");};// 店舗データを取得\nuseEffect(()=>{const fetchStoreData=async()=>{try{const response=await fetch(\"\".concat(process.env.REACT_APP_BASE_URL,\"/stores/type/random/3\"));if(!response.ok){throw new Error(\"HTTP\\u30A8\\u30E9\\u30FC: \".concat(response.status));}const data=await response.json();// データを3倍に複製\nsetStores([...data,...data,...data]);}catch(error){console.error(\"データ取得中にエラーが発生しました:\",error);}};fetchStoreData();// 初回レンダリング時のみ実行\n},[]);// アニメーションの設定\nuseEffect(()=>{if(!slideRef.current||stores.length===0)return;const slider=slideRef.current;let startPosition=0;const animate=()=>{startPosition-=1;// スライダーをループさせる\nif(Math.abs(startPosition)>=slider.scrollWidth/2){startPosition=0;}slider.style.transform=\"translateX(\".concat(startPosition,\"px)\");animationFrameId.current=requestAnimationFrame(animate);};animationFrameId.current=requestAnimationFrame(animate);// クリーンアップ\nreturn()=>{if(animationFrameId.current!==null){cancelAnimationFrame(animationFrameId.current);}};},[stores]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"petshop-page-container\",children:[/*#__PURE__*/_jsx(\"p\",{onClick:handleClick,className:\"search-petshop\",children:\"\\u5168\\u56FD\\u306E\\u30DA\\u30C3\\u30C8\\u30B7\\u30E7\\u30C3\\u30D7\\u3092\\u63A2\\u3059\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:PetshopImage,alt:\"\\u30DA\\u30C3\\u30C8\\u30B7\\u30E7\\u30C3\\u30D7\\u306E\\u30A4\\u30E9\\u30B9\\u30C8\",className:\"petshop-image\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"store-slider-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"dogrun-slider\",ref:slideRef,children:stores.map((store,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"store-card\",onClick:()=>{navigate(\"/petshop/detail/\".concat(store.store_id));},children:[store.store_img.length>0&&/*#__PURE__*/_jsx(\"img\",{src:store.store_img[0],alt:store.store_name,className:\"store-image\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"slider-store-name\",children:store.store_name}),/*#__PURE__*/_jsx(\"h3\",{className:\"slider-prefecture-name\",children:store.prefecture_name})]},\"\".concat(store.store_id,\"-\").concat(index)))})})]}),/*#__PURE__*/_jsx(Footer,{})]});};export default PetshopPage;","map":{"version":3,"names":["React","useEffect","useRef","useState","useNavigate","PetshopImage","Header","Footer","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PetshopPage","navigate","stores","setStores","slideRef","animationFrameId","handleClick","fetchStoreData","response","fetch","concat","process","env","REACT_APP_BASE_URL","ok","Error","status","data","json","error","console","current","length","slider","startPosition","animate","Math","abs","scrollWidth","style","transform","requestAnimationFrame","cancelAnimationFrame","children","className","onClick","src","alt","ref","map","store","index","store_id","store_img","store_name","prefecture_name"],"sources":["/Users/hadamayuka/Desktop/wan_paradise/my-app/src/pages/Petshop/PetShopPage.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"./PetShopPage.css\";\nimport PetshopImage from \"../assets/images/Petshop/petshop.top.png\";\nimport Header from \"../Header\";\nimport Footer from \"../Footer\";\n\ninterface Store {\n  store_id: number;\n  store_name: string;\n  description: string;\n  store_img: string[];\n  address: string;\n  phone_number: string;\n  opening_hours: string;\n  store_url: string;\n  prefecture_name: string;\n}\n\n\nconst PetshopPage: React.FC = () => {\n  const navigate = useNavigate();\n  const [stores, setStores] = useState<Store[]>([]);\n  const slideRef = useRef<HTMLDivElement>(null);\n  const animationFrameId = useRef<number | null>(null);\n\n  const handleClick = () => {\n    navigate(\"/petshop-regions-list\");\n  };\n\n  // 店舗データを取得\n  useEffect(() => {\n    const fetchStoreData = async () => {\n      try {\n        const response = await fetch(`${process.env.REACT_APP_BASE_URL}/stores/type/random/3`);\n        if (!response.ok) {\n          throw new Error(`HTTPエラー: ${response.status}`);\n        }\n        const data = await response.json();\n\n        // データを3倍に複製\n        setStores([...data, ...data, ...data]);\n      } catch (error) {\n        console.error(\"データ取得中にエラーが発生しました:\", error);\n      }\n    };\n    fetchStoreData(); // 初回レンダリング時のみ実行\n  }, []);\n\n  // アニメーションの設定\n  useEffect(() => {\n    if (!slideRef.current || stores.length === 0) return;\n\n    const slider = slideRef.current;\n    let startPosition = 0;\n\n    const animate = () => {\n      startPosition -= 1;\n\n      // スライダーをループさせる\n      if (Math.abs(startPosition) >= slider.scrollWidth / 2) {\n        startPosition = 0;\n      }\n\n      slider.style.transform = `translateX(${startPosition}px)`;\n      animationFrameId.current = requestAnimationFrame(animate);\n    };\n\n    animationFrameId.current = requestAnimationFrame(animate);\n\n    // クリーンアップ\n    return () => {\n      if (animationFrameId.current !== null) {\n        cancelAnimationFrame(animationFrameId.current);\n      }\n    };\n  }, [stores]);\n\n  return (\n    <>\n      <Header />\n      <div className=\"petshop-page-container\">\n        <p onClick={handleClick} className=\"search-petshop\">\n          全国のペットショップを探す\n        </p>\n        <div>\n          <img src={PetshopImage} alt=\"ペットショップのイラスト\" className=\"petshop-image\" />\n        </div>\n        <div className=\"store-slider-container\">\n          <div className=\"dogrun-slider\" ref={slideRef}>\n            {stores.map((store, index) => (\n              <div\n                key={`${store.store_id}-${index}`}\n                className=\"store-card\"\n                onClick={() => {\n                  navigate(`/petshop/detail/${store.store_id}`);\n                }}\n              >\n                {store.store_img.length > 0 && (\n                  <img\n                    src={store.store_img[0]}\n                    alt={store.store_name}\n                    className=\"store-image\"\n                  />\n                )}\n                <h3 className=\"slider-store-name\">{store.store_name}</h3>\n                <h3 className=\"slider-prefecture-name\">{store.prefecture_name}</h3>\n              </div>\n\n            ))}\n          </div>\n        </div>\n      </div>\n      <Footer />\n    </>\n  );\n};\n\nexport default PetshopPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}