{"ast":null,"code":"import React,{useEffect,useRef,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import\"./HospitalPage.css\";import HospitalImage from\"../assets/images/Hospital/hospital.png\";import Header from\"../Header\";import Footer from\"../Footer\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const HospitalPage=()=>{const navigate=useNavigate();const[stores,setStores]=useState([]);const sliderRef=useRef(null);const animationFrameId=useRef(null);const handleClick=()=>{navigate(\"/hospitalregionsList\");};useEffect(()=>{const fetchStoreData=async()=>{try{const response=await fetch(\"http://localhost:5003/stores/type/random/4\");if(!response.ok){throw new Error(`HTTPエラー: ${response.status}`);}const data=await response.json();console.log(\"取得したデータ:\",data);// データを複製してループを作成\nsetStores([...data,...data]);}catch(error){console.error(\"店舗データの取得中にエラーが発生しました:\",error);}};fetchStoreData();},[]);useEffect(()=>{if(!sliderRef.current||stores.length===0)return;const slider=sliderRef.current;let startPosition=0;const animate=()=>{startPosition-=1;// 速度を設定（0.5pxずつ移動）\nif(Math.abs(startPosition)>=slider.scrollWidth/2){// スクロール幅の半分を超えたらリセット\nstartPosition=0;}slider.style.transform=`translateX(${startPosition}px)`;animationFrameId.current=requestAnimationFrame(animate);// 再帰的に呼び出す\n};// アニメーション開始\nanimationFrameId.current=requestAnimationFrame(animate);return()=>{// クリーンアップ\nif(animationFrameId.current!==null){cancelAnimationFrame(animationFrameId.current);}};},[stores]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"hospital-page-container\",children:[/*#__PURE__*/_jsx(\"p\",{onClick:handleClick,className:\"search-hospital\",children:\"\\u5168\\u56FD\\u306E\\u52D5\\u7269\\u75C5\\u9662\\u3092\\u63A2\\u3059\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:HospitalImage,alt:\"\\u52D5\\u7269\\u75C5\\u9662\\u306E\\u30A4\\u30E9\\u30B9\\u30C8\",className:\"hospitalImage\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"store-slider-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"dogrun-slider\",ref:sliderRef,children:stores.map((store,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"store-card\",onClick:()=>{navigate(`/petshop/detail/${store.store_id}`);},children:[store.store_img.length>0&&/*#__PURE__*/_jsx(\"img\",{src:store.store_img[0],alt:store.store_name,className:\"store-image\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"slider-store-name\",children:store.store_name}),/*#__PURE__*/_jsx(\"h3\",{className:\"slider-prefecture-name\",children:store.prefecture_name})]},`${store.store_id}-${index}`))})})]}),/*#__PURE__*/_jsx(Footer,{})]});};export default HospitalPage;","map":{"version":3,"names":["React","useEffect","useRef","useState","useNavigate","HospitalImage","Header","Footer","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","HospitalPage","navigate","stores","setStores","sliderRef","animationFrameId","handleClick","fetchStoreData","response","fetch","ok","Error","status","data","json","console","log","error","current","length","slider","startPosition","animate","Math","abs","scrollWidth","style","transform","requestAnimationFrame","cancelAnimationFrame","children","className","onClick","src","alt","ref","map","store","index","store_id","store_img","store_name","prefecture_name"],"sources":["/Users/hadamayuka/Desktop/wan_paradise/my-app/src/pages/Hospital/HospitalPage.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"./HospitalPage.css\";\nimport HospitalImage from \"../assets/images/Hospital/hospital.png\";\nimport Header from \"../Header\";\nimport Footer from \"../Footer\";\n\ninterface Store {\n    store_id: number;\n    store_name: string;\n    description: string;\n    store_img: string[];\n    address: string;\n    phone_number: string;\n    opening_hours: string;\n    store_url: string;\n    prefecture_name: string;\n}\n\nconst HospitalPage: React.FC = () => {\n    const navigate = useNavigate();\n    const [stores, setStores] = useState<Store[]>([]);\n    const sliderRef = useRef<HTMLDivElement>(null);\n    const animationFrameId = useRef<number | null>(null);\n\n    const handleClick = () => {\n        navigate(\"/hospitalregionsList\");\n    };\n\n    useEffect(() => {\n        const fetchStoreData = async () => {\n            try {\n                const response = await fetch(\"http://localhost:5003/stores/type/random/4\");\n                if (!response.ok) {\n                    throw new Error(`HTTPエラー: ${response.status}`);\n                }\n                const data = await response.json();\n                console.log(\"取得したデータ:\", data);\n        \n                  // データを複製してループを作成\n                setStores([...data, ...data]);\n            } catch (error) {\n                console.error(\"店舗データの取得中にエラーが発生しました:\", error);\n            }\n            };\n        fetchStoreData();\n    }, []);\n    \n    useEffect(() => {\n        if (!sliderRef.current || stores.length === 0) return;\n    \n        const slider = sliderRef.current;\n        let startPosition = 0;\n    \n        const animate = () => {\n          startPosition -= 1; // 速度を設定（0.5pxずつ移動）\n    \n        if (Math.abs(startPosition) >= slider.scrollWidth / 2) {\n            // スクロール幅の半分を超えたらリセット\n            startPosition = 0;\n        }\n    \n        slider.style.transform = `translateX(${startPosition}px)`;\n          animationFrameId.current = requestAnimationFrame(animate); // 再帰的に呼び出す\n        };\n    \n        // アニメーション開始\n        animationFrameId.current = requestAnimationFrame(animate);\n    \n        return () => {\n          // クリーンアップ\n        if (animationFrameId.current !== null) {\n            cancelAnimationFrame(animationFrameId.current);\n        }\n        };\n        }, [stores]);\n\n    return (\n        <>\n            <Header />\n            <div className=\"hospital-page-container\">\n                <p onClick={handleClick} className=\"search-hospital\">\n                    全国の動物病院を探す\n                </p>\n                <div>\n                    <img src={HospitalImage} alt=\"動物病院のイラスト\" className=\"hospitalImage\" />\n                </div>\n                <div className=\"store-slider-container\">\n                <div className=\"dogrun-slider\" ref={sliderRef}>\n                {stores.map((store, index) => (\n                        <div\n                            key={`${store.store_id}-${index}`}\n                            className=\"store-card\"\n                            onClick={() => {\n                                navigate(`/petshop/detail/${store.store_id}`);\n                            }}\n                        >\n                            {store.store_img.length > 0 && (\n                                <img\n                                    src={store.store_img[0]}\n                                    alt={store.store_name}\n                                    className=\"store-image\"\n                                />\n                            )}\n                            <h3 className=\"slider-store-name\">{store.store_name}</h3>\n                            <h3 className=\"slider-prefecture-name\">{store.prefecture_name}</h3>\n                        </div>\n                    ))}\n                    </div>\n                </div>\n            </div>\n            <Footer />\n        </>\n    );\n};\n\nexport default HospitalPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}