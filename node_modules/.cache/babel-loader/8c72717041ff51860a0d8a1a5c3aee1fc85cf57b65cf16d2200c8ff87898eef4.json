{"ast":null,"code":"import _objectSpread from\"/Users/hadamayuka/Desktop/wan_paradise/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import{useParams,Link}from\"react-router-dom\";import Header from\"../Header\";import Footer from\"../Footer\";import ImageSlider from\"../../ImageSlider\";import\"./HospitalDetail.css\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const getUserIdFromCookie=()=>{const cookies=document.cookie.split(\";\");for(let cookie of cookies){const[name,value]=cookie.split(\"=\");if(name===\"user_id\"){const parsedValue=parseInt(value,10);return isNaN(parsedValue)?null:parsedValue;}}return null;};const HospitalDetail=()=>{const{id}=useParams();const[store,setStore]=useState(null);const[error,setError]=useState(null);const[isFavorite,setIsFavorite]=useState(false);const[userId,setUserId]=useState(0);const MAP_API_KEY=process.env.REACT_APP_MAP_API_KEY;//クッキーからuserIdを取得するための関数\nuseEffect(()=>{const userIdFromCookie=getUserIdFromCookie();console.log(\"クッキーから取得した userId:\",userIdFromCookie);setUserId(userIdFromCookie);},[]);//店舗の口コミ\nuseEffect(()=>{const fetchStoreWithReviews=async()=>{try{const storeResponse=await fetch(\"\".concat(process.env.REACT_APP_BASE_URL,\"/stores/detail/\").concat(id));const reviewResponse=await fetch(\"\".concat(process.env.REACT_APP_BASE_URL,\"/reviews\"));if(!storeResponse.ok||!reviewResponse.ok){throw new Error(\"データ取得に失敗しました\");}const storeData=await storeResponse.json();const reviewData=await reviewResponse.json();const reviews=reviewData.filter(review=>review.store_id===storeData.store_id);setStore(_objectSpread(_objectSpread({},storeData),{},{reviews}));}catch(err){setError(\"店舗情報の取得に失敗しました\");}};fetchStoreWithReviews();},[id]);// お気に入りの追加・解除\nconst handleFavoriteClick=async()=>{if(!store)return;const postUrl=\"\".concat(process.env.REACT_APP_BASE_URL,\"/favorites\");const deleteUrl=\"\".concat(process.env.REACT_APP_BASE_URL,\"/favorites\");try{let response;if(isFavorite){response=await fetch(deleteUrl,{method:\"DELETE\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({user_id:userId,store_id:store.store_id})});}else{response=await fetch(postUrl,{method:\"POST\",headers:{\"Content-type\":\"application/json\"},body:JSON.stringify({user_id:userId,store_id:store.store_id})});}if(!response.ok){throw new Error(\"お気に入りの更新に失敗しました\");}setIsFavorite(!isFavorite);// お気に入り状態をトグル\n}catch(error){setError(\"お気に入りの更新に失敗しました\");}};//店舗データとレビューを取得する\nuseEffect(()=>{const fetchStoreData=async()=>{try{const storeResponse=await fetch(\"\".concat(process.env.REACT_APP_BASE_URL,\"/stores/detail/\").concat(id));const reviewResponse=await fetch(\"\".concat(process.env.REACT_APP_BASE_URL,\"/reviews\"));const storeData=await storeResponse.json();const reviewData=await reviewResponse.json();const reviews=reviewData.filter(review=>review.store_id===storeData.store_id);setStore(_objectSpread(_objectSpread({},storeData),{},{reviews}));}catch(err){setError(\"データの取得に失敗しました\");}};fetchStoreData();},[id]);//-------指定された店舗の情報とその店舗がユーザーのお気に入りに登録されているかどうかを取得する\nuseEffect(()=>{if(!userId)return;const fetchStoreAndFavorite=async()=>{try{const StoreResponse=await fetch(\"\".concat(process.env.REACT_APP_BASE_URL,\"/stores/detail/\").concat(id));if(!StoreResponse.ok)throw new Error(\"店舗情報の取得に失敗しました\");const storeData=await StoreResponse.json();setStore(storeData);//お気に入りの状態を取得\nconst favoriteResponse=await fetch(\"\".concat(process.env.REACT_APP_BASE_URL,\"/favorites/\").concat(userId));const favoriteData=await favoriteResponse.json();setIsFavorite(favoriteData.some(fav=>fav.store_id===storeData.store_id));}catch(err){setError(\"\");}};fetchStoreAndFavorite();},[id,userId]);if(error)return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:error});if(!store)return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:\"\\u30C7\\u30FC\\u30BF\\u3092\\u8AAD\\u307F\\u8FBC\\u3093\\u3067\\u3044\\u307E\\u3059...\"});//平均評価の計算\nconst averageRating=store.reviews&&store.reviews.length>0?store.reviews.reduce((sum,rev)=>sum+rev.rating,0)/store.reviews.length:0;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"detail-title\",children:store.store_name}),store.store_img.length>0?/*#__PURE__*/_jsx(ImageSlider,{images:store.store_img}):/*#__PURE__*/_jsx(\"p\",{children:\"\\u753B\\u50CF\\u304C\\u3042\\u308A\\u307E\\u305B\\u3093\"}),store.reviews&&store.reviews.length>0&&/*#__PURE__*/_jsx(Link,{to:\"/hospital/reviews/\".concat(store.store_id),className:\"review-button-detail\",children:\"\\u53E3\\u30B3\\u30DF\\u3092\\u898B\\u308B\"}),/*#__PURE__*/_jsx(\"div\",{style:{margin:\"20px 0\"},children:store.reviews&&store.reviews.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:\"24px\",color:\"gray\"},children:[1,2,3,4,5].map(value=>/*#__PURE__*/_jsx(\"span\",{className:\"star \".concat(value<=Math.round(averageRating)?\"selected\":\"\"),children:\"\\u2605\"},value))}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"14px\",fontWeight:\"bold\"},children:averageRating.toFixed(1)})]}):/*#__PURE__*/_jsx(\"p\",{children:\"\\u307E\\u3060\\u53E3\\u30B3\\u30DF\\u306F\\u3042\\u308A\\u307E\\u305B\\u3093\"})}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u4F4F\\u6240:\"}),\" \",store.store_address]}),MAP_API_KEY&&/*#__PURE__*/_jsx(\"div\",{style:{margin:\"20px 0\"},children:/*#__PURE__*/_jsx(\"iframe\",{title:\"Google Map\",width:\"100%\",height:\"300\",style:{border:\"0\",borderRadius:\"8px\"},src:\"https://www.google.com/maps/embed/v1/place?key=\".concat(MAP_API_KEY,\"&q=\").concat(encodeURIComponent(store.store_address)),allowFullScreen:true})}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u96FB\\u8A71\\u756A\\u53F7:\",store.store_phone_number]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u55B6\\u696D\\u6642\\u9593:\",store.store_opening_hours]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:handleFavoriteClick,className:\"favorite-button\".concat(isFavorite?\" active\":\"\"),children:isFavorite?\"お気に入り解除\":\"お気に入り登録\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"a\",{href:store.store_url,target:\"_blank\",rel:\"noopener noreferrer\",className:\"official-site\",children:\"\\u5E97\\u8217\\u306E\\u516C\\u5F0F\\u30B5\\u30A4\\u30C8\"})]}),/*#__PURE__*/_jsx(Footer,{})]});};export default HospitalDetail;","map":{"version":3,"names":["React","useEffect","useState","useParams","Link","Header","Footer","ImageSlider","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","getUserIdFromCookie","cookies","document","cookie","split","name","value","parsedValue","parseInt","isNaN","HospitalDetail","id","store","setStore","error","setError","isFavorite","setIsFavorite","userId","setUserId","MAP_API_KEY","process","env","REACT_APP_MAP_API_KEY","userIdFromCookie","console","log","fetchStoreWithReviews","storeResponse","fetch","concat","REACT_APP_BASE_URL","reviewResponse","ok","Error","storeData","json","reviewData","reviews","filter","review","store_id","_objectSpread","err","handleFavoriteClick","postUrl","deleteUrl","response","method","headers","body","JSON","stringify","user_id","fetchStoreData","fetchStoreAndFavorite","StoreResponse","favoriteResponse","favoriteData","some","fav","className","children","averageRating","length","reduce","sum","rev","rating","store_name","store_img","images","to","style","margin","fontSize","color","map","Math","round","fontWeight","toFixed","store_address","title","width","height","border","borderRadius","src","encodeURIComponent","allowFullScreen","store_phone_number","store_opening_hours","onClick","href","store_url","target","rel"],"sources":["/Users/hadamayuka/Desktop/wan_paradise/my-app/src/pages/Hospital/HospitalDetail.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useParams, Link } from \"react-router-dom\";\nimport Header from \"../Header\";\nimport Footer from \"../Footer\";\nimport ImageSlider from \"../../ImageSlider\";\nimport \"./HospitalDetail.css\";\n\ninterface Store {\n  store_id: number;\n  store_name: string;\n  store_description: string;\n  store_address: string;\n  store_opening_hours: string;\n  store_phone_number: string;\n  store_url: string;\n  store_img: string[];\n  tags: string[];\n  reviews?: Review[];\n}\n\ninterface Review {\n  id: number;\n  store_id: number;\n  rating: number;\n  comment: string;\n}\n\nconst getUserIdFromCookie = (): number | null => {\n  const cookies = document.cookie.split(\";\");\n  for (let cookie of cookies) {\n    const [name, value] = cookie.split(\"=\");\n    if (name === \"user_id\") {\n      const parsedValue = parseInt(value, 10);\n      return isNaN(parsedValue) ? null : parsedValue;\n    }\n  }\n  return null;\n};\n\nconst HospitalDetail: React.FC = () => {\n  const { id } = useParams<{ id: string }>();\n  const [store, setStore] = useState<Store | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  const [isFavorite, setIsFavorite] = useState<boolean>(false);\n  const [userId, setUserId] = useState<number | null>(0);\n  const MAP_API_KEY = process.env.REACT_APP_MAP_API_KEY;\n\n  //クッキーからuserIdを取得するための関数\n  useEffect(() => {\n    const userIdFromCookie = getUserIdFromCookie();\n    console.log(\"クッキーから取得した userId:\", userIdFromCookie);\n    setUserId(userIdFromCookie);\n  }, []);\n\n  //店舗の口コミ\n  useEffect(() => {\n    const fetchStoreWithReviews = async () => {\n      try {\n        const storeResponse = await fetch(`${process.env.REACT_APP_BASE_URL}/stores/detail/${id}`);\n        const reviewResponse = await fetch(`${process.env.REACT_APP_BASE_URL}/reviews`);\n\n        if (!storeResponse.ok || !reviewResponse.ok) {\n          throw new Error(\"データ取得に失敗しました\");\n        }\n\n        const storeData: Store = await storeResponse.json();\n        const reviewData: Review[] = await reviewResponse.json();\n\n        const reviews = reviewData.filter(\n          (review) => review.store_id === storeData.store_id);\n        setStore({ ...storeData, reviews });\n      } catch (err: any) {\n        setError(\"店舗情報の取得に失敗しました\");\n      }\n    };\n    fetchStoreWithReviews();\n  }, [id]);\n\n\n  // お気に入りの追加・解除\n  const handleFavoriteClick = async () => {\n    if (!store) return;\n    const postUrl = `${process.env.REACT_APP_BASE_URL}/favorites`;\n    const deleteUrl = `${process.env.REACT_APP_BASE_URL}/favorites`;\n    try {\n      let response;\n      if (isFavorite) {\n        response = await fetch(deleteUrl, {\n          method: \"DELETE\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({\n            user_id: userId,\n            store_id: store.store_id,\n          })\n        });\n      } else {\n        response = await fetch(postUrl, {\n          method: \"POST\",\n          headers: {\n            \"Content-type\": \"application/json\",\n          },\n          body: JSON.stringify({\n            user_id: userId,\n            store_id: store.store_id,\n          }),\n        });\n      }\n      if (!response.ok) {\n        throw new Error(\"お気に入りの更新に失敗しました\");\n      }\n      setIsFavorite(!isFavorite); // お気に入り状態をトグル\n    } catch (error) {\n      setError(\"お気に入りの更新に失敗しました\");\n    }\n  };\n\n  //店舗データとレビューを取得する\n  useEffect(() => {\n    const fetchStoreData = async () => {\n      try {\n        const storeResponse = await fetch(`${process.env.REACT_APP_BASE_URL}/stores/detail/${id}`);\n        const reviewResponse = await fetch(`${process.env.REACT_APP_BASE_URL}/reviews`);\n\n        const storeData: Store = await storeResponse.json();\n        const reviewData: Review[] = await reviewResponse.json();\n\n        const reviews = reviewData.filter(\n          (review) => review.store_id === storeData.store_id\n        );\n        setStore({ ...storeData, reviews });\n      } catch (err: any) {\n        setError(\"データの取得に失敗しました\");\n      }\n    };\n    fetchStoreData();\n  }, [id]);\n\n  //-------指定された店舗の情報とその店舗がユーザーのお気に入りに登録されているかどうかを取得する\n  useEffect(() => {\n    if (!userId) return;\n    const fetchStoreAndFavorite = async () => {\n      try {\n        const StoreResponse = await fetch(\n          `${process.env.REACT_APP_BASE_URL}/stores/detail/${id}`\n        );\n        if (!StoreResponse.ok) throw new Error(\"店舗情報の取得に失敗しました\");\n\n        const storeData: Store = await StoreResponse.json();\n        setStore(storeData);\n\n        //お気に入りの状態を取得\n        const favoriteResponse = await fetch(\n          `${process.env.REACT_APP_BASE_URL}/favorites/${userId}`\n        );\n        const favoriteData: { store_id: number }[] =\n          await favoriteResponse.json();\n        setIsFavorite(favoriteData.some((fav) => fav.store_id === storeData.store_id));\n      } catch (err: any) {\n        setError(\"\");\n      }\n    };\n    fetchStoreAndFavorite();\n  }, [id, userId]);\n\n  if (error) return <div className=\"container\">{error}</div>;\n  if (!store) return <div className=\"container\">データを読み込んでいます...</div>;\n\n  //平均評価の計算\n  const averageRating =\n    store.reviews && store.reviews.length > 0\n      ? store.reviews.reduce((sum, rev) => sum + rev.rating, 0) /\n      store.reviews.length\n      : 0;\n\n\n\n  return (\n    <>\n      <Header />\n      <div className=\"detail-container\">\n        <h1 className=\"detail-title\">{store.store_name}</h1>\n        {store.store_img.length > 0 ? (\n          <ImageSlider images={store.store_img} />\n        ) : (\n          <p>画像がありません</p>\n        )}\n        {store.reviews && store.reviews.length > 0 && (\n          <Link to={`/hospital/reviews/${store.store_id}`} className=\"review-button-detail\">\n            口コミを見る\n          </Link>\n        )}\n        {/* 平均評価を星で表示 */}\n        <div style={{ margin: \"20px 0\" }}>\n          {store.reviews && store.reviews.length > 0 ? (\n            <>\n              <div style={{ fontSize: \"24px\", color: \"gray\" }}>\n                {[1, 2, 3, 4, 5].map((value) => (\n                  <span\n                    key={value}\n                    className={`star ${value <= Math.round(averageRating) ? \"selected\" : \"\"\n                      }`}\n                  >\n                    ★\n                  </span>\n                ))}\n              </div>\n              <p style={{ fontSize: \"14px\", fontWeight: \"bold\" }}>\n                {averageRating.toFixed(1)}\n              </p>\n            </>\n          ) : (\n            <p>まだ口コミはありません</p>\n          )}\n        </div>\n        <p><strong>住所:</strong> {store.store_address}</p>\n\n        {MAP_API_KEY && (\n          <div style={{ margin: \"20px 0\" }}>\n            <iframe\n              title=\"Google Map\"\n              width=\"100%\"\n              height=\"300\"\n              style={{ border: \"0\", borderRadius: \"8px\" }}\n              src={`https://www.google.com/maps/embed/v1/place?key=${MAP_API_KEY}&q=${encodeURIComponent(store.store_address)}`}\n              allowFullScreen\n            ></iframe>\n          </div>\n        )}\n        <p>電話番号:{store.store_phone_number}</p>\n        <p>営業時間:{store.store_opening_hours}</p>\n\n        <br />\n        <button onClick={handleFavoriteClick}\n          className={`favorite-button${isFavorite ? \" active\" : \"\"}`}>\n          {isFavorite ? \"お気に入り解除\" : \"お気に入り登録\"}\n        </button>\n        <br />\n        <a href={store.store_url} target=\"_blank\" rel=\"noopener noreferrer\" className=\"official-site\">\n          店舗の公式サイト\n        </a>\n      </div>\n      <Footer />\n    </>\n  );\n};\n\nexport default HospitalDetail;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}